# yaml-language-server: $schema=https://schema.infrahub.app/infrahub/schema/latest.json
---
version: "1.0"

generics:
  - name: HostVirtualMachine
    namespace: Virtualization
    description: A generic holding all attributes common to device that can host virtual machine.
    include_in_menu: false
    relationships:
      - name: virtual_machines
        cardinality: many
        peer: VirtualizationVirtualMachine
        kind: Component

nodes:
  - name: VirtualMachine
    namespace: Virtualization
    description: A virtual machine hosted on a hypervisor or a cluster.
    include_in_menu: true
    label: "Virtual Machine"
    icon: "carbon:virtual-machine"
    inherit_from:
      - DcimGenericDevice
    attributes:
      - name: role
        kind: Dropdown
        optional: true
        description: Role of the virtual machine.
        order_weight: 1400
        choices:
          - name: application
            label: Application Server
            color: "#7f7fff"
          - name: storage
            label: Storage Server
            color: "#bf7fbf"
      - name: vcpu
        kind: Number
        optional: true
        order_weight: 1900
        description: Number of CPU cores assigned to the VM.
      - name: memory
        kind: Number
        optional: true
        order_weight: 1900
        description: Amount of memory (in GB) assigned to the VM.
      - name: disk
        kind: Number
        optional: true
        order_weight: 1900
        description: Disk space (in GB) assigned to the VM.
    relationships:
      - name: host
        peer: VirtualizationHostVirtualMachine
        optional: false
        cardinality: one
        kind: Parent
